# Production Environment Variables for Azure Deployment
# Copy this file and update with your Azure-specific values

# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=production
PORT=8080  # Azure App Service uses 8080 by default

# ============================================
# AZURE APP SERVICE CONFIGURATION
# ============================================
# Your Azure Web App URL (will be auto-configured during deployment)
CLIENT_URL=https://YOUR_APP_NAME.azurewebsites.net

# ============================================
# DATABASE CONFIGURATION (Azure MySQL)
# ============================================
# Format: YOUR_DB_NAME.mysql.database.azure.com
DB_HOST=YOUR_DB_NAME.mysql.database.azure.com
DB_PORT=3306
DB_USER=adminuser
DB_PASSWORD=YOUR_SECURE_DB_PASSWORD
DB_NAME=iter_college_db

# MySQL SSL Configuration (Azure requires SSL)
DB_SSL=true
DB_SSL_CA=/path/to/BaltimoreCyberTrustRoot.crt.pem

# ============================================
# JWT CONFIGURATION (Generate new secrets!)
# ============================================
# Use: [System.Guid]::NewGuid().ToString() in PowerShell
JWT_SECRET=GENERATE_SECURE_SECRET_HERE
JWT_REFRESH_SECRET=GENERATE_ANOTHER_SECURE_SECRET_HERE
JWT_EXPIRE=1h
JWT_REFRESH_EXPIRE=7d

# ============================================
# AZURE STORAGE CONFIGURATION
# ============================================
STORAGE_MODE=azure

# Azure Storage Connection String
# Get from: az storage account show-connection-string
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=YOUR_STORAGE_NAME;AccountKey=YOUR_STORAGE_KEY;EndpointSuffix=core.windows.net

# Azure Blob Container Name
AZURE_STORAGE_CONTAINER=uploads

# Alternative: Use local storage (not recommended for production)
# STORAGE_MODE=local
# UPLOAD_DIR=./uploads
# MAX_FILE_SIZE=10485760

# ============================================
# CORS CONFIGURATION
# ============================================
CORS_WHITELIST=https://YOUR_APP_NAME.azurewebsites.net,https://www.yourcollege.edu

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# ADMIN CONFIGURATION
# ============================================
ADMIN_EMAIL=admin@iter.edu
ADMIN_PASSWORD=CHANGE_THIS_IMMEDIATELY

# ============================================
# SOCKET.IO CONFIGURATION
# ============================================
SOCKET_CORS_ORIGIN=https://YOUR_APP_NAME.azurewebsites.net

# ============================================
# BACKUP CONFIGURATION
# ============================================
BACKUP_DIR=./backups
BACKUP_RETENTION_DAYS=30

# ============================================
# EMAIL CONFIGURATION (Optional)
# ============================================
# SMTP Configuration for sending emails
SMTP_HOST=smtp.office365.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@yourcollege.edu
SMTP_PASSWORD=YOUR_EMAIL_PASSWORD
SMTP_FROM=ITER College <noreply@yourcollege.edu>

# ============================================
# AZURE APPLICATION INSIGHTS (Optional)
# ============================================
# For monitoring and analytics
APPINSIGHTS_INSTRUMENTATIONKEY=YOUR_INSTRUMENTATION_KEY

# ============================================
# AZURE KEY VAULT (Optional - Recommended)
# ============================================
# Store secrets in Azure Key Vault
# AZURE_KEY_VAULT_URI=https://YOUR_VAULT_NAME.vault.azure.net/

# ============================================
# SESSION CONFIGURATION
# ============================================
SESSION_SECRET=GENERATE_ANOTHER_SECRET_HERE
SESSION_MAX_AGE=86400000  # 24 hours in milliseconds

# ============================================
# LOGGING CONFIGURATION
# ============================================
LOG_LEVEL=info
LOG_FORMAT=json

# ============================================
# SECURITY HEADERS
# ============================================
# Content Security Policy
CSP_DIRECTIVES=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_ANALYTICS=true
ENABLE_NOTIFICATIONS=true
ENABLE_FILE_UPLOAD=true
ENABLE_AI_FEATURES=true

# ============================================
# PERFORMANCE CONFIGURATION
# ============================================
# Enable compression
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6

# Cache configuration
CACHE_ENABLED=true
CACHE_TTL=3600  # 1 hour

# ============================================
# DATABASE CONNECTION POOL
# ============================================
DB_CONNECTION_LIMIT=10
DB_QUEUE_LIMIT=0

# ============================================
# CUSTOM DOMAIN (Optional)
# ============================================
# CUSTOM_DOMAIN=www.yourcollege.edu
# SSL_CERTIFICATE_THUMBPRINT=YOUR_CERT_THUMBPRINT

# ============================================
# AZURE SPECIFIC SETTINGS
# ============================================
# These are auto-configured by Azure, but can be overridden
WEBSITE_NODE_DEFAULT_VERSION=18-lts
WEBSITE_TIME_ZONE=UTC
WEBSITES_ENABLE_APP_SERVICE_STORAGE=true

# ============================================
# MONITORING & TELEMETRY
# ============================================
# Enable detailed error logging
DETAILED_ERRORS=false  # Set to true only for debugging

# Application Insights sampling rate (0-100)
APPINSIGHTS_SAMPLING_PERCENTAGE=100

# ============================================
# MAINTENANCE MODE
# ============================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System is under maintenance. Please check back later.

# ============================================
# NOTES
# ============================================
# 1. Never commit this file with actual secrets to version control
# 2. Use Azure Key Vault for storing sensitive information in production
# 3. Configure these as App Settings in Azure Portal for better security
# 4. Rotate JWT secrets regularly (every 90 days)
# 5. Use strong, unique passwords for all services
# 6. Enable SSL/TLS for all connections
# 7. Configure firewall rules to restrict database access
# 8. Set up automated backups for database and storage
# 9. Enable Application Insights for monitoring
# 10. Use managed identities when possible instead of connection strings
